# ðŸ“ˆ Money Fact ê°œë°œì„ ìœ„í•œ í•„ìˆ˜ ìžë£Œ ëª¨ìŒ (KIS API & Tech Guide)

## 1. í•œêµ­íˆ¬ìžì¦ê¶Œ(KIS) Open API í•µì‹¬ ê°€ì´ë“œ

### ðŸ”‘ 1.1 ê¸°ë³¸ ì„¤ì • (Base URL)
*   **ì‹¤ì „ íˆ¬ìž:** `https://openapi.koreainvestment.com:9443`
*   **ëª¨ì˜ íˆ¬ìž:** `https://openapivts.koreainvestment.com:29443`
*   **ì›¹ì†Œì¼“(ì‹¤ì‹œê°„):** `ws://ops.koreainvestment.com:21000`

### ðŸ‘¥ 1.2 ì™¸ì¸/ê¸°ê´€ ìˆ˜ê¸‰ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (í•µì‹¬!)
*   **API ëª…ì¹­:** êµ­ë‚´ê¸°ê´€_ì™¸êµ­ì¸ ë§¤ë§¤ì¢…ëª©ê°€ì§‘ê³„ [êµ­ë‚´ì£¼ì‹-037]
*   **Endpoint:** `/uapi/domestic-stock/v1/quotations/foreign-institution-total`
*   **TR_ID (ì‹¤ì „):** `FHPTJ04400000`
*   **ì„¤ëª…:** ìž¥ì¤‘ ì‹¤ì‹œê°„(ì•½ 30ë¶„~1ì‹œê°„ ì§€ì—° ì§‘ê³„)ìœ¼ë¡œ ì™¸êµ­ì¸ê³¼ ê¸°ê´€ì˜ ë§¤ìˆ˜/ë§¤ë„ ìž ì •ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
*   **ì£¼ì˜:** ì´ ë°ì´í„°ëŠ” í™•ì •ì¹˜ê°€ ì•„ë‹ˆë¯€ë¡œ 'ê²½í–¥ì„±' íŒŒì•…ì— ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. 
    *   *Tip:* 3ì¼ ì—°ì† ë§¤ë„ì„¸ê°€ í¬ì°©ë˜ë©´ 'ìœ„í—˜ ì‹ í˜¸'ë¡œ ê°„ì£¼í•˜ëŠ” ë¡œì§ êµ¬í˜„ ê¶Œìž¥.

### âš¡ 1.3 ì‹¤ì‹œê°„ ì²´ê²°ê°€ (Websocket)
*   **TR_ID:** `H0STCNT0` (ì‹¤ì‹œê°„ ì£¼ì‹ ì²´ê²°ê°€)
*   **í™œìš©:** ì‚¬ìš©ìžê°€ ë³´ê³  ìžˆëŠ” 'MY ì¢…ëª©'ì˜ í˜„ìž¬ê°€ë¥¼ 0.1ì´ˆ ë‹¨ìœ„ë¡œ ì—…ë°ì´íŠ¸í•˜ì—¬ UIì— ë°˜ì˜.

---

## 2. React Native (Expo) ê°œë°œ ê¿€íŒ

### ðŸ“± 2.1 API í†µì‹  (Axios vs Fetch)
*   **ì¶”ì²œ:** `Axios` ì‚¬ìš© (Timeout ì„¤ì • ë° Interceptor í™œìš©ì´ ìš©ì´í•¨).
*   **í† í° ê´€ë¦¬:** KIS í† í°ì€ 24ì‹œê°„ ìœ íš¨í•˜ì§€ë§Œ, ì•±ì„ ê»ë‹¤ ì¼œë©´ ì‚¬ë¼ì§ˆ ìˆ˜ ìžˆìŒ. `AsyncStorage`ì— ì €ìž¥í•´ë‘ê³  ë§Œë£Œ ì‹œê°„ì„ ì²´í¬í•˜ì—¬ ìž¬ë°œê¸‰ ë¡œì§ êµ¬í˜„ í•„ìˆ˜.

### ðŸ”” 2.2 ë°±ê·¸ë¼ìš´ë“œ ì•Œë¦¼ (Background Fetch)
*   **ë¼ì´ë¸ŒëŸ¬ë¦¬:** `expo-background-fetch`, `expo-task-manager`
*   **ì „ëžµ:** 
    *   ì•±ì´ êº¼ì ¸ìžˆì–´ë„ 15ë¶„ë§ˆë‹¤ ê¹¨ì–´ë‚˜ì„œ "ë‚´ ì¢…ëª©"ì˜ ìˆ˜ê¸‰ì„ ì²´í¬.
    *   ìœ„í—˜ ê°ì§€ ì‹œ `expo-notifications`ë¡œ ë¡œì»¬ í‘¸ì‹œ ë°œì†¡.
    *   *ì£¼ì˜:* iOSëŠ” ë°±ê·¸ë¼ìš´ë“œ ìž‘ì—… ì£¼ê¸°ë¥¼ OSê°€ ë§˜ëŒ€ë¡œ ê²°ì •í•˜ë¯€ë¡œ, ì•ˆë“œë¡œì´ë“œë³´ë‹¤ ëœ ì •í™•í•  ìˆ˜ ìžˆìŒ.

---

## 3. Money Factë§Œì  ì°¨ë³„í™” ì•„ì´ë””ì–´ (Brainstorming)

### ðŸ’¡ "ìŠ¤ë§ˆíŠ¸ ë¨¸ë‹ˆ ì¶”ì ê¸°"
*   ë‹¨ìˆœížˆ "ì™¸ì¸ì´ ìƒ€ë‹¤"ê°€ ì•„ë‹ˆë¼, **"ì™¸ì¸ì´ 3ì¼ ì—°ì† ì‚¬ë©´ì„œ ì£¼ê°€ë¥¼ 5% ì˜¬ë ¸ë‹¤ -> ì°ë§¤ìˆ˜"**ë¼ê³  í•´ì„í•´ì£¼ëŠ” ë¡œì§.
*   ë°˜ëŒ€ë¡œ **"ê°œë¯¸ë§Œ ìƒ€ëŠ”ë° ì£¼ê°€ê°€ ì˜¬ëžë‹¤ -> ê¼¬ì‹œê¸° íŒ¨í„´"** ê²½ê³ .

### ðŸ’¡ "ì¸ê°„ ì§€í‘œ (Human Index)"
*   ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì„ í†µí•´ "ì§€ê¸ˆ ì‚´ê¹Œìš”?" íˆ¬í‘œë¥¼ ì˜¬ë¦¼.
*   ëŒ€ë‹¤ìˆ˜ê°€ "ì‚°ë‹¤"ê³  í•˜ë©´ -> "ê³µí¬ íƒìš• ì§€ìˆ˜: íƒìš•" -> **ë§¤ë„ ê¶Œìž¥**. (ì—­ë°œìƒ íˆ¬ìž)

---

## 4. ì°¸ê³ ìš© ì˜ˆì œ ì½”ë“œ (Python -> JS ë³€í™˜ í•„ìš”)
```javascript
// KIS API ìš”ì²­ ì˜ˆì‹œ (Axios)
const getForeignerData = async (stockCode, token) => {
  try {
    const response = await axios.get(`${BASE_URL}/uapi/domestic-stock/v1/quotations/foreign-institution-total`, {
      headers: {
        'Content-Type': 'application/json',
        'authorization': `Bearer ${token}`,
        'appkey': APP_KEY,
        'appsecret': APP_SECRET,
        'tr_id': 'FHPTJ04400000'
      },
      params: {
        'fid_cond_mrkt_div_code': 'J',
        'fid_input_iscd': stockCode
      }
    });
    return response.data;
  } catch (error) {
    console.error("API Error", error);
  }
};
```
